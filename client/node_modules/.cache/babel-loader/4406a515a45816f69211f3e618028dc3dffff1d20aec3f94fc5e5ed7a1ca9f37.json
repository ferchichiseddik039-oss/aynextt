{"ast":null,"code":"import _objectSpread from\"C:/Users/houda/OneDrive/Bureau/boutique-vetements/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{FaTrash,FaArrowLeft,FaLock,FaTruck,FaCreditCard,FaShieldAlt}from'react-icons/fa';import{toast}from'react-toastify';import{useCart}from'../contexts/CartContext';import{useAuth}from'../contexts/AuthContext';import{formatBrand}from'../utils/formatUtils';import'../styles/Cart.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const[loading,setLoading]=useState(true);const[updating,setUpdating]=useState(false);const[showCheckout,setShowCheckout]=useState(false);const[forceUpdate,setForceUpdate]=useState(0);const{cart,updateQuantity,removeFromCart,clearCart,getTotal,getItemCount}=useCart();const{user}=useAuth();const navigate=useNavigate();useEffect(()=>{if(user){fetchCart();}else{setLoading(false);}},[user]);// Effet pour forcer la mise à jour quand le panier change\nuseEffect(()=>{var _cart$articles;console.log('🔄 Panier mis à jour:',cart);console.log('🔄 Nombre d\\'articles:',((_cart$articles=cart.articles)===null||_cart$articles===void 0?void 0:_cart$articles.length)||0);},[cart]);const fetchCart=async()=>{try{setLoading(true);// Cart is already loaded by the context, no need to fetch\n}catch(error){toast.error('Erreur lors du chargement du panier');}finally{setLoading(false);}};const handleQuantityChange=async(productId,newQuantity)=>{if(newQuantity<1)return;try{setUpdating(true);await updateQuantity(productId,newQuantity);// Le panier est automatiquement mis à jour par le contexte\ntoast.success('Quantité mise à jour');}catch(error){toast.error('Erreur lors de la mise à jour de la quantité');}finally{setUpdating(false);}};const handleRemoveItem=async productId=>{console.log('🗑️ Suppression du produit:',productId);console.log('Panier avant suppression:',cart);try{setUpdating(true);const result=await removeFromCart(productId);console.log('Résultat de la suppression:',result);if(result.success){toast.success('Produit retiré du panier');// Forcer le re-render\nsetForceUpdate(prev=>prev+1);console.log('🔄 Force update déclenché');}else{toast.error('Erreur lors de la suppression du produit');}}catch(error){console.error('Erreur lors de la suppression:',error);toast.error('Erreur lors de la suppression du produit');}finally{setUpdating(false);}};const handleClearCart=async()=>{if(window.confirm('Êtes-vous sûr de vouloir vider votre panier ?')){try{setUpdating(true);await clearCart();toast.success('Panier vidé');}catch(error){toast.error('Erreur lors du vidage du panier');}finally{setUpdating(false);}}};const handleCheckout=()=>{if(!user){toast.error('Veuillez vous connecter pour continuer');navigate('/login',{state:{from:'/cart'}});return;}setShowCheckout(true);};const handleContinueShopping=()=>{navigate('/products');};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Chargement du panier...\"})]});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-required\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Connexion requise\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Veuillez vous connecter pour acc\\xE9der \\xE0 votre panier\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn-primary\",children:\"Se connecter\"}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"btn-secondary\",children:\"Cr\\xE9er un compte\"})]})]})]})});}if(cart.articles&&cart.articles.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"empty-cart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-cart-icon\",children:\"\\uD83D\\uDED2\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Votre panier est vide\"}),/*#__PURE__*/_jsx(\"p\",{children:\"D\\xE9couvrez nos produits et commencez vos achats\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleContinueShopping,className:\"btn-primary\",children:\"Continuer mes achats\"})]})]})});}const subtotal=getTotal();const shipping=subtotal>=50?0:5.99;const total=subtotal+shipping;const itemCount=getItemCount();return/*#__PURE__*/_jsx(\"div\",{className:\"cart-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Mon Panier\"}),/*#__PURE__*/_jsxs(\"p\",{children:[itemCount,\" article(s) dans votre panier\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cart-items-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Produits\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleClearCart,className:\"clear-cart-btn\",disabled:updating,children:[/*#__PURE__*/_jsx(FaTrash,{}),\"Vider le panier\"]})]}),cart.articles&&cart.articles.map(item=>/*#__PURE__*/_jsx(CartItem,{item:item,onQuantityChange:handleQuantityChange,onRemove:handleRemoveItem,updating:updating},\"\".concat(item._id,\"-\").concat(forceUpdate)))]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"summary-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"R\\xE9sum\\xE9 de la commande\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Sous-total (\",itemCount,\" article(s))\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[subtotal.toFixed(2),\"\\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Frais de livraison\"}),/*#__PURE__*/_jsx(\"span\",{children:shipping===0?/*#__PURE__*/_jsx(\"span\",{className:\"free-shipping\",children:\"Gratuit\"}):\"\".concat(shipping.toFixed(2),\"\\u20AC\")})]}),shipping>0&&/*#__PURE__*/_jsx(\"div\",{className:\"shipping-info\",children:/*#__PURE__*/_jsx(\"small\",{children:\"Livraison gratuite \\xE0 partir de 50\\u20AC d'achat\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[total.toFixed(2),\"\\u20AC\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleCheckout,className:\"checkout-btn\",disabled:updating,children:[/*#__PURE__*/_jsx(FaLock,{}),\"Passer la commande\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleContinueShopping,className:\"continue-shopping-btn\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\"Continuer mes achats\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaShieldAlt,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Paiement s\\xE9curis\\xE9\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaTruck,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Livraison rapide\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"security-item\",children:[/*#__PURE__*/_jsx(FaCreditCard,{}),/*#__PURE__*/_jsx(\"span\",{children:\"Retours gratuits\"})]})]})]})})]}),showCheckout&&/*#__PURE__*/_jsx(CheckoutSection,{cart:cart,total:total,shipping:shipping,onClose:()=>setShowCheckout(false),onSuccess:()=>{setShowCheckout(false);navigate('/orders');}})]})});};// Composant article du panier\nconst CartItem=_ref=>{var _item$produit$images,_item$produit$images$,_item$produit$images2,_item$produit$images3,_item$produit$images4;let{item,onQuantityChange,onRemove,updating}=_ref;const[quantity,setQuantity]=useState(item.quantite);const handleQuantityChange=newQuantity=>{if(newQuantity>=1&&newQuantity<=10){setQuantity(newQuantity);onQuantityChange(item.produit._id,newQuantity);}};const handleRemove=()=>{console.log('🔍 CartItem - item:',item);console.log('🔍 CartItem - item.produit:',item.produit);console.log('🔍 CartItem - item.produit._id:',item.produit._id);onRemove(item.produit._id);};const price=item.prixUnitaire;const totalPrice=price*item.quantite;return/*#__PURE__*/_jsxs(\"div\",{className:\"cart-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"item-image\",children:/*#__PURE__*/_jsx(\"img\",{src:((_item$produit$images=item.produit.images)===null||_item$produit$images===void 0?void 0:(_item$produit$images$=_item$produit$images[0])===null||_item$produit$images$===void 0?void 0:_item$produit$images$.url)||((_item$produit$images2=item.produit.images)===null||_item$produit$images2===void 0?void 0:_item$produit$images2[0])||'/placeholder-product.jpg',alt:((_item$produit$images3=item.produit.images)===null||_item$produit$images3===void 0?void 0:(_item$produit$images4=_item$produit$images3[0])===null||_item$produit$images4===void 0?void 0:_item$produit$images4.alt)||item.produit.nom,onError:e=>{e.target.src='/placeholder-product.jpg';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"item-name\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.produit._id),children:item.produit.nom})}),/*#__PURE__*/_jsx(\"p\",{className:\"item-brand\",children:formatBrand(item.produit.marque)}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-options\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"option\",children:[\"Taille: \",item.taille]}),/*#__PURE__*/_jsxs(\"span\",{className:\"option\",children:[\"Couleur: \",item.couleur]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"unit-price\",children:[price.toFixed(2),\"\\u20AC\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"total-price\",children:[totalPrice.toFixed(2),\"\\u20AC\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"item-quantity\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(quantity-1),disabled:quantity<=1||updating,className:\"quantity-btn\",children:\"-\"}),/*#__PURE__*/_jsx(\"span\",{className:\"quantity-display\",children:item.quantite}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleQuantityChange(quantity+1),disabled:quantity>=10||updating,className:\"quantity-btn\",children:\"+\"})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRemove,disabled:updating,className:\"remove-item-btn\",title:\"Retirer du panier\",children:/*#__PURE__*/_jsx(FaTrash,{})})]})]});};// Composant de passage de commande\nconst CheckoutSection=_ref2=>{let{cart,total,shipping,onClose,onSuccess}=_ref2;const[formData,setFormData]=useState({adresseLivraison:{rue:'',ville:'',codePostal:'',pays:'France'},methodePaiement:'card',notes:''});const[loading,setLoading]=useState(false);const[errors,setErrors]=useState({});const handleChange=e=>{const{name,value}=e.target;if(name.includes('.')){const[parent,child]=name.split('.');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[parent]:_objectSpread(_objectSpread({},prev[parent]),{},{[child]:value})}));}else{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));}// Effacer l'erreur du champ modifié\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};const validateForm=()=>{const newErrors={};if(!formData.adresseLivraison.rue.trim()){newErrors['adresseLivraison.rue']='La rue est requise';}if(!formData.adresseLivraison.ville.trim()){newErrors['adresseLivraison.ville']='La ville est requise';}if(!formData.adresseLivraison.codePostal){newErrors['adresseLivraison.codePostal']='Le code postal est requis';}else if(!/^\\d{5}$/.test(formData.adresseLivraison.codePostal)){newErrors['adresseLivraison.codePostal']='Le code postal doit contenir 5 chiffres';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{const orderData={adresseLivraison:formData.adresseLivraison,methodePaiement:formData.methodePaiement,notes:formData.notes};const response=await fetch('/api/orders',{method:'POST',headers:{'Content-Type':'application/json','x-auth-token':localStorage.getItem('token')},body:JSON.stringify(orderData)});if(response.ok){toast.success('Commande passée avec succès !');onSuccess();}else{const error=await response.json();toast.error(error.message||'Erreur lors de la commande');}}catch(error){toast.error('Erreur de connexion');}finally{setLoading(false);}};const getFieldError=fieldName=>{return errors[fieldName]||'';};return/*#__PURE__*/_jsx(\"div\",{className:\"checkout-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Finaliser la commande\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"close-btn\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"checkout-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-sections\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Adresse de livraison\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.rue\",children:\"Rue *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.rue\",name:\"adresseLivraison.rue\",value:formData.adresseLivraison.rue,onChange:handleChange,placeholder:\"123 Rue de la Paix\",className:getFieldError('adresseLivraison.rue')?'error':''}),getFieldError('adresseLivraison.rue')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.rue')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.codePostal\",children:\"Code postal *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.codePostal\",name:\"adresseLivraison.codePostal\",value:formData.adresseLivraison.codePostal,onChange:handleChange,placeholder:\"75001\",className:getFieldError('adresseLivraison.codePostal')?'error':''}),getFieldError('adresseLivraison.codePostal')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.codePostal')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.ville\",children:\"Ville *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"adresse.ville\",name:\"adresseLivraison.ville\",value:formData.adresseLivraison.ville,onChange:handleChange,placeholder:\"Paris\",className:getFieldError('adresseLivraison.ville')?'error':''}),getFieldError('adresseLivraison.ville')&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:getFieldError('adresseLivraison.ville')})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"adresse.pays\",children:\"Pays\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"adresse.pays\",name:\"adresseLivraison.pays\",value:formData.adresseLivraison.pays,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"France\",children:\"France\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Belgique\",children:\"Belgique\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Suisse\",children:\"Suisse\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Canada\",children:\"Canada\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"M\\xE9thode de paiement\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"payment-methods\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"payment-method\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"methodePaiement\",value:\"card\",checked:formData.methodePaiement==='card',onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"method-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"method-name\",children:\"Carte bancaire\"}),/*#__PURE__*/_jsx(\"span\",{className:\"method-description\",children:\"Visa, Mastercard, American Express\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"payment-method\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"methodePaiement\",value:\"paypal\",checked:formData.methodePaiement==='paypal',onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"checkmark\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"method-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"method-name\",children:\"PayPal\"}),/*#__PURE__*/_jsx(\"span\",{className:\"method-description\",children:\"Paiement s\\xE9curis\\xE9 en ligne\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Notes de commande (optionnel)\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"notes\",value:formData.notes,onChange:handleChange,placeholder:\"Instructions sp\\xE9ciales, pr\\xE9f\\xE9rences de livraison...\",rows:\"3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-summary\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"R\\xE9sum\\xE9 de la commande\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Sous-total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[(total-shipping).toFixed(2),\"\\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Livraison\"}),/*#__PURE__*/_jsx(\"span\",{children:shipping===0?'Gratuit':\"\".concat(shipping.toFixed(2),\"\\u20AC\")})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-row total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[total.toFixed(2),\"\\u20AC\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"btn-secondary\",disabled:loading,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",disabled:loading,children:loading?'Traitement...':'Confirmer la commande'})]})]})]})});};export default Cart;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","FaTrash","FaArrowLeft","FaLock","FaTruck","FaCreditCard","FaShieldAlt","toast","useCart","useAuth","formatBrand","jsx","_jsx","jsxs","_jsxs","Cart","loading","setLoading","updating","setUpdating","showCheckout","setShowCheckout","forceUpdate","setForceUpdate","cart","updateQuantity","removeFromCart","clearCart","getTotal","getItemCount","user","navigate","fetchCart","_cart$articles","console","log","articles","length","error","handleQuantityChange","productId","newQuantity","success","handleRemoveItem","result","prev","handleClearCart","window","confirm","handleCheckout","state","from","handleContinueShopping","className","children","to","onClick","subtotal","shipping","total","itemCount","disabled","map","item","CartItem","onQuantityChange","onRemove","concat","_id","toFixed","CheckoutSection","onClose","onSuccess","_ref","_item$produit$images","_item$produit$images$","_item$produit$images2","_item$produit$images3","_item$produit$images4","quantity","setQuantity","quantite","produit","handleRemove","price","prixUnitaire","totalPrice","src","images","url","alt","nom","onError","e","target","marque","taille","couleur","title","_ref2","formData","setFormData","adresseLivraison","rue","ville","codePostal","pays","methodePaiement","notes","errors","setErrors","handleChange","name","value","includes","parent","child","split","_objectSpread","validateForm","newErrors","trim","test","Object","keys","handleSubmit","preventDefault","orderData","response","fetch","method","headers","localStorage","getItem","body","JSON","stringify","ok","json","message","getFieldError","fieldName","onSubmit","htmlFor","type","id","onChange","placeholder","checked","rows"],"sources":["C:/Users/houda/OneDrive/Bureau/boutique-vetements/client/src/pages/Cart.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { FaTrash, FaArrowLeft, FaLock, FaTruck, FaCreditCard, FaShieldAlt } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport { useCart } from '../contexts/CartContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { formatBrand } from '../utils/formatUtils';\nimport '../styles/Cart.css';\n\nconst Cart = () => {\n  const [loading, setLoading] = useState(true);\n  const [updating, setUpdating] = useState(false);\n  const [showCheckout, setShowCheckout] = useState(false);\n  const [forceUpdate, setForceUpdate] = useState(0);\n\n  const { \n    cart, \n    updateQuantity, \n    removeFromCart, \n    clearCart, \n    getTotal, \n    getItemCount \n  } = useCart();\n  \n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (user) {\n      fetchCart();\n    } else {\n      setLoading(false);\n    }\n  }, [user]);\n\n  // Effet pour forcer la mise à jour quand le panier change\n  useEffect(() => {\n    console.log('🔄 Panier mis à jour:', cart);\n    console.log('🔄 Nombre d\\'articles:', cart.articles?.length || 0);\n  }, [cart]);\n\n  const fetchCart = async () => {\n    try {\n      setLoading(true);\n      // Cart is already loaded by the context, no need to fetch\n    } catch (error) {\n      toast.error('Erreur lors du chargement du panier');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleQuantityChange = async (productId, newQuantity) => {\n    if (newQuantity < 1) return;\n\n    try {\n      setUpdating(true);\n      await updateQuantity(productId, newQuantity);\n      // Le panier est automatiquement mis à jour par le contexte\n      toast.success('Quantité mise à jour');\n    } catch (error) {\n      toast.error('Erreur lors de la mise à jour de la quantité');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const handleRemoveItem = async (productId) => {\n    console.log('🗑️ Suppression du produit:', productId);\n    console.log('Panier avant suppression:', cart);\n    \n    try {\n      setUpdating(true);\n      const result = await removeFromCart(productId);\n      console.log('Résultat de la suppression:', result);\n      \n      if (result.success) {\n        toast.success('Produit retiré du panier');\n        // Forcer le re-render\n        setForceUpdate(prev => prev + 1);\n        console.log('🔄 Force update déclenché');\n      } else {\n        toast.error('Erreur lors de la suppression du produit');\n      }\n    } catch (error) {\n      console.error('Erreur lors de la suppression:', error);\n      toast.error('Erreur lors de la suppression du produit');\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  const handleClearCart = async () => {\n    if (window.confirm('Êtes-vous sûr de vouloir vider votre panier ?')) {\n      try {\n        setUpdating(true);\n        await clearCart();\n        toast.success('Panier vidé');\n      } catch (error) {\n        toast.error('Erreur lors du vidage du panier');\n      } finally {\n        setUpdating(false);\n      }\n    }\n  };\n\n  const handleCheckout = () => {\n    if (!user) {\n      toast.error('Veuillez vous connecter pour continuer');\n      navigate('/login', { state: { from: '/cart' } });\n      return;\n    }\n    setShowCheckout(true);\n  };\n\n  const handleContinueShopping = () => {\n    navigate('/products');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Chargement du panier...</p>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"cart-page\">\n        <div className=\"cart-container\">\n          <div className=\"cart-header\">\n            <h1>Mon Panier</h1>\n          </div>\n          <div className=\"login-required\">\n            <h2>Connexion requise</h2>\n            <p>Veuillez vous connecter pour accéder à votre panier</p>\n            <div className=\"auth-buttons\">\n              <Link to=\"/login\" className=\"btn-primary\">\n                Se connecter\n              </Link>\n              <Link to=\"/register\" className=\"btn-secondary\">\n                Créer un compte\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (cart.articles && cart.articles.length === 0) {\n    return (\n      <div className=\"cart-page\">\n        <div className=\"cart-container\">\n          <div className=\"cart-header\">\n            <h1>Mon Panier</h1>\n          </div>\n          <div className=\"empty-cart\">\n            <div className=\"empty-cart-icon\">🛒</div>\n            <h2>Votre panier est vide</h2>\n            <p>Découvrez nos produits et commencez vos achats</p>\n            <button onClick={handleContinueShopping} className=\"btn-primary\">\n              Continuer mes achats\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  const subtotal = getTotal();\n  const shipping = subtotal >= 50 ? 0 : 5.99;\n  const total = subtotal + shipping;\n  const itemCount = getItemCount();\n\n  return (\n    <div className=\"cart-page\">\n      <div className=\"cart-container\">\n        <div className=\"cart-header\">\n          <h1>Mon Panier</h1>\n          <p>{itemCount} article(s) dans votre panier</p>\n        </div>\n\n        <div className=\"cart-content\">\n          {/* Liste des produits */}\n          <div className=\"cart-items\">\n            <div className=\"cart-items-header\">\n              <h3>Produits</h3>\n              <button \n                onClick={handleClearCart}\n                className=\"clear-cart-btn\"\n                disabled={updating}\n              >\n                <FaTrash />\n                Vider le panier\n              </button>\n            </div>\n\n            {cart.articles && cart.articles.map((item) => (\n              <CartItem\n                key={`${item._id}-${forceUpdate}`}\n                item={item}\n                onQuantityChange={handleQuantityChange}\n                onRemove={handleRemoveItem}\n                updating={updating}\n              />\n            ))}\n          </div>\n\n          {/* Résumé et commande */}\n          <div className=\"cart-summary\">\n            <div className=\"summary-card\">\n              <h3>Résumé de la commande</h3>\n              \n              <div className=\"summary-details\">\n                <div className=\"summary-row\">\n                  <span>Sous-total ({itemCount} article(s))</span>\n                  <span>{subtotal.toFixed(2)}€</span>\n                </div>\n                \n                <div className=\"summary-row\">\n                  <span>Frais de livraison</span>\n                  <span>\n                    {shipping === 0 ? (\n                      <span className=\"free-shipping\">Gratuit</span>\n                    ) : (\n                      `${shipping.toFixed(2)}€`\n                    )}\n                  </span>\n                </div>\n                \n                {shipping > 0 && (\n                  <div className=\"shipping-info\">\n                    <small>\n                      Livraison gratuite à partir de 50€ d'achat\n                    </small>\n                  </div>\n                )}\n                \n                <div className=\"summary-row total\">\n                  <span>Total</span>\n                  <span>{total.toFixed(2)}€</span>\n                </div>\n              </div>\n\n              <div className=\"summary-actions\">\n                <button\n                  onClick={handleCheckout}\n                  className=\"checkout-btn\"\n                  disabled={updating}\n                >\n                  <FaLock />\n                  Passer la commande\n                </button>\n                \n                <button\n                  onClick={handleContinueShopping}\n                  className=\"continue-shopping-btn\"\n                >\n                  <FaArrowLeft />\n                  Continuer mes achats\n                </button>\n              </div>\n\n              <div className=\"security-info\">\n                <div className=\"security-item\">\n                  <FaShieldAlt />\n                  <span>Paiement sécurisé</span>\n                </div>\n                <div className=\"security-item\">\n                  <FaTruck />\n                  <span>Livraison rapide</span>\n                </div>\n                <div className=\"security-item\">\n                  <FaCreditCard />\n                  <span>Retours gratuits</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Section de passage de commande */}\n        {showCheckout && (\n          <CheckoutSection\n            cart={cart}\n            total={total}\n            shipping={shipping}\n            onClose={() => setShowCheckout(false)}\n            onSuccess={() => {\n              setShowCheckout(false);\n              navigate('/orders');\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Composant article du panier\nconst CartItem = ({ item, onQuantityChange, onRemove, updating }) => {\n  const [quantity, setQuantity] = useState(item.quantite);\n\n  const handleQuantityChange = (newQuantity) => {\n    if (newQuantity >= 1 && newQuantity <= 10) {\n      setQuantity(newQuantity);\n      onQuantityChange(item.produit._id, newQuantity);\n    }\n  };\n\n  const handleRemove = () => {\n    console.log('🔍 CartItem - item:', item);\n    console.log('🔍 CartItem - item.produit:', item.produit);\n    console.log('🔍 CartItem - item.produit._id:', item.produit._id);\n    onRemove(item.produit._id);\n  };\n\n  const price = item.prixUnitaire;\n  const totalPrice = price * item.quantite;\n\n  return (\n    <div className=\"cart-item\">\n      <div className=\"item-image\">\n        <img \n          src={item.produit.images?.[0]?.url || item.produit.images?.[0] || '/placeholder-product.jpg'} \n          alt={item.produit.images?.[0]?.alt || item.produit.nom}\n          onError={(e) => {\n            e.target.src = '/placeholder-product.jpg';\n          }}\n        />\n      </div>\n\n      <div className=\"item-details\">\n        <div className=\"item-info\">\n          <h4 className=\"item-name\">\n            <Link to={`/product/${item.produit._id}`}>\n              {item.produit.nom}\n            </Link>\n          </h4>\n          <p className=\"item-brand\">{formatBrand(item.produit.marque)}</p>\n          <div className=\"item-options\">\n            <span className=\"option\">Taille: {item.taille}</span>\n            <span className=\"option\">Couleur: {item.couleur}</span>\n          </div>\n        </div>\n\n        <div className=\"item-price\">\n          <span className=\"unit-price\">{price.toFixed(2)}€</span>\n          <span className=\"total-price\">{totalPrice.toFixed(2)}€</span>\n        </div>\n\n        <div className=\"item-quantity\">\n          <div className=\"quantity-controls\">\n            <button\n              onClick={() => handleQuantityChange(quantity - 1)}\n              disabled={quantity <= 1 || updating}\n              className=\"quantity-btn\"\n            >\n              -\n            </button>\n            <span className=\"quantity-display\">{item.quantite}</span>\n            <button\n              onClick={() => handleQuantityChange(quantity + 1)}\n              disabled={quantity >= 10 || updating}\n              className=\"quantity-btn\"\n            >\n              +\n            </button>\n          </div>\n        </div>\n\n        <button\n          onClick={handleRemove}\n          disabled={updating}\n          className=\"remove-item-btn\"\n          title=\"Retirer du panier\"\n        >\n          <FaTrash />\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// Composant de passage de commande\nconst CheckoutSection = ({ cart, total, shipping, onClose, onSuccess }) => {\n  const [formData, setFormData] = useState({\n    adresseLivraison: {\n      rue: '',\n      ville: '',\n      codePostal: '',\n      pays: 'France'\n    },\n    methodePaiement: 'card',\n    notes: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    if (name.includes('.')) {\n      const [parent, child] = name.split('.');\n      setFormData(prev => ({\n        ...prev,\n        [parent]: {\n          ...prev[parent],\n          [child]: value\n        }\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n    \n    // Effacer l'erreur du champ modifié\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors = {};\n\n    if (!formData.adresseLivraison.rue.trim()) {\n      newErrors['adresseLivraison.rue'] = 'La rue est requise';\n    }\n\n    if (!formData.adresseLivraison.ville.trim()) {\n      newErrors['adresseLivraison.ville'] = 'La ville est requise';\n    }\n\n    if (!formData.adresseLivraison.codePostal) {\n      newErrors['adresseLivraison.codePostal'] = 'Le code postal est requis';\n    } else if (!/^\\d{5}$/.test(formData.adresseLivraison.codePostal)) {\n      newErrors['adresseLivraison.codePostal'] = 'Le code postal doit contenir 5 chiffres';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const orderData = {\n        adresseLivraison: formData.adresseLivraison,\n        methodePaiement: formData.methodePaiement,\n        notes: formData.notes\n      };\n\n      const response = await fetch('/api/orders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': localStorage.getItem('token')\n        },\n        body: JSON.stringify(orderData)\n      });\n\n      if (response.ok) {\n        toast.success('Commande passée avec succès !');\n        onSuccess();\n      } else {\n        const error = await response.json();\n        toast.error(error.message || 'Erreur lors de la commande');\n      }\n    } catch (error) {\n      toast.error('Erreur de connexion');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getFieldError = (fieldName) => {\n    return errors[fieldName] || '';\n  };\n\n  return (\n    <div className=\"checkout-overlay\">\n      <div className=\"checkout-modal\">\n        <div className=\"checkout-header\">\n          <h2>Finaliser la commande</h2>\n          <button onClick={onClose} className=\"close-btn\">×</button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"checkout-form\">\n          <div className=\"checkout-sections\">\n            {/* Adresse de livraison */}\n            <div className=\"checkout-section\">\n              <h3>Adresse de livraison</h3>\n              \n              <div className=\"form-group\">\n                <label htmlFor=\"adresse.rue\">Rue *</label>\n                <input\n                  type=\"text\"\n                  id=\"adresse.rue\"\n                  name=\"adresseLivraison.rue\"\n                  value={formData.adresseLivraison.rue}\n                  onChange={handleChange}\n                  placeholder=\"123 Rue de la Paix\"\n                  className={getFieldError('adresseLivraison.rue') ? 'error' : ''}\n                />\n                {getFieldError('adresseLivraison.rue') && (\n                  <span className=\"error-message\">{getFieldError('adresseLivraison.rue')}</span>\n                )}\n              </div>\n\n              <div className=\"form-row\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.codePostal\">Code postal *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.codePostal\"\n                    name=\"adresseLivraison.codePostal\"\n                    value={formData.adresseLivraison.codePostal}\n                    onChange={handleChange}\n                    placeholder=\"75001\"\n                    className={getFieldError('adresseLivraison.codePostal') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.codePostal') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.codePostal')}</span>\n                  )}\n                </div>\n\n                <div className=\"form-group\">\n                  <label htmlFor=\"adresse.ville\">Ville *</label>\n                  <input\n                    type=\"text\"\n                    id=\"adresse.ville\"\n                    name=\"adresseLivraison.ville\"\n                    value={formData.adresseLivraison.ville}\n                    onChange={handleChange}\n                    placeholder=\"Paris\"\n                    className={getFieldError('adresseLivraison.ville') ? 'error' : ''}\n                  />\n                  {getFieldError('adresseLivraison.ville') && (\n                    <span className=\"error-message\">{getFieldError('adresseLivraison.ville')}</span>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"form-group\">\n                <label htmlFor=\"adresse.pays\">Pays</label>\n                <select\n                  id=\"adresse.pays\"\n                  name=\"adresseLivraison.pays\"\n                  value={formData.adresseLivraison.pays}\n                  onChange={handleChange}\n                >\n                  <option value=\"France\">France</option>\n                  <option value=\"Belgique\">Belgique</option>\n                  <option value=\"Suisse\">Suisse</option>\n                  <option value=\"Canada\">Canada</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Méthode de paiement */}\n            <div className=\"checkout-section\">\n              <h3>Méthode de paiement</h3>\n              \n              <div className=\"payment-methods\">\n                <label className=\"payment-method\">\n                  <input\n                    type=\"radio\"\n                    name=\"methodePaiement\"\n                    value=\"card\"\n                    checked={formData.methodePaiement === 'card'}\n                    onChange={handleChange}\n                  />\n                  <span className=\"checkmark\"></span>\n                  <div className=\"method-info\">\n                    <span className=\"method-name\">Carte bancaire</span>\n                    <span className=\"method-description\">Visa, Mastercard, American Express</span>\n                  </div>\n                </label>\n\n                <label className=\"payment-method\">\n                  <input\n                    type=\"radio\"\n                    name=\"methodePaiement\"\n                    value=\"paypal\"\n                    checked={formData.methodePaiement === 'paypal'}\n                    onChange={handleChange}\n                  />\n                  <span className=\"checkmark\"></span>\n                  <div className=\"method-info\">\n                    <span className=\"method-name\">PayPal</span>\n                    <span className=\"method-description\">Paiement sécurisé en ligne</span>\n                  </div>\n                </label>\n              </div>\n            </div>\n\n            {/* Notes */}\n            <div className=\"checkout-section\">\n              <h3>Notes de commande (optionnel)</h3>\n              <textarea\n                name=\"notes\"\n                value={formData.notes}\n                onChange={handleChange}\n                placeholder=\"Instructions spéciales, préférences de livraison...\"\n                rows=\"3\"\n              />\n            </div>\n          </div>\n\n          {/* Résumé final */}\n          <div className=\"checkout-summary\">\n            <h3>Résumé de la commande</h3>\n            <div className=\"summary-row\">\n              <span>Sous-total</span>\n              <span>{(total - shipping).toFixed(2)}€</span>\n            </div>\n            <div className=\"summary-row\">\n              <span>Livraison</span>\n              <span>{shipping === 0 ? 'Gratuit' : `${shipping.toFixed(2)}€`}</span>\n            </div>\n            <div className=\"summary-row total\">\n              <span>Total</span>\n              <span>{total.toFixed(2)}€</span>\n            </div>\n          </div>\n\n          <div className=\"checkout-actions\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"btn-secondary\"\n              disabled={loading}\n            >\n              Annuler\n            </button>\n            <button\n              type=\"submit\"\n              className=\"btn-primary\"\n              disabled={loading}\n            >\n              {loading ? 'Traitement...' : 'Confirmer la commande'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}