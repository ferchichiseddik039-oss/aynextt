<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Test Custom Hoodie Designer</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #000;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .test-info {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      border: 1px solid #333;
      text-align: center;
    }

    h1 {
      margin: 30px 0 15px 0;
      font-size: 1.8rem;
      color: white;
      text-align: center;
      font-weight: normal;
    }

    .hoodie-container {
      position: relative;
      width: 350px;
      margin: 20px 0;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
    }

    .hoodie {
      width: 100%;
      border-radius: 10px;
      transition: all 0.3s ease;
    }

    .logo {
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translate(-50%, -50%);
      object-fit: contain;
      pointer-events: none;
      z-index: 2;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    }

    .controls {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      justify-content: center;
    }

    .controls label {
      color: white;
      font-size: 0.9rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }

    .controls input[type="color"] {
      width: 35px;
      height: 35px;
      border: 1px solid black;
      border-radius: 4px;
      cursor: pointer;
      background: white;
    }

    .controls input[type="file"] {
      width: 35px;
      height: 35px;
      border: 1px solid black;
      border-radius: 4px;
      cursor: pointer;
      background: white;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23000'%3E%3Cpath d='M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z'/%3E%3C/svg%3E");
      background-size: 18px;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.8;
      transition: opacity 0.3s;
    }

    .controls input[type="file"]:hover {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="test-info">
    <h1>üß™ Test du Designer de Capuche</h1>
    <p>Interface simplifi√©e correspondant √† l'image de r√©f√©rence</p>
  </div>

  <h1>Personnalise ta capuche</h1>
  
  <div class="hoodie-container">
    <div 
      id="hoodie" 
      class="hoodie"
      style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 400 500\'%3E%3Cdefs%3E%3Cstyle%3E.hoodie-body%7Bfill:%23ffffff%3Bstroke:%23e0e0e0%3Bstroke-width:2%7D.hoodie-hood%7Bfill:%23ffffff%3Bstroke:%23e0e0e0%3Bstroke-width:2%7D.hoodie-pocket%7Bfill:%23ffffff%3Bstroke:%23e0e0e0%3Bstroke-width:2%7D.hoodie-sleeve%7Bfill:%23ffffff%3Bstroke:%23e0e0e0%3Bstroke-width:2%7D%3C/style%3E%3C/defs%3E%3C!-- Corps principal --%3E%3Crect x=\'120\' y=\'200\' width=\'160\' height=\'200\' rx=\'10\' class=\'hoodie-body\'/%3E%3C!-- Capuche --%3E%3Cpath d=\'M120 200 Q200 150 280 200 L280 220 Q200 170 120 220 Z\' class=\'hoodie-hood\'/%3E%3C!-- Poche kangourou --%3E%3Crect x=\'140\' y=\'350\' width=\'120\' height=\'40\' rx=\'5\' class=\'hoodie-pocket\'/%3E%3C!-- Manche gauche --%3E%3Crect x=\'80\' y=\'220\' width=\'40\' height=\'120\' rx=\'20\' class=\'hoodie-sleeve\'/%3E%3C!-- Manche droite --%3E%3Crect x=\'280\' y=\'220\' width=\'40\' height=\'120\' rx=\'20\' class=\'hoodie-sleeve\'/%3E%3C!-- Cordons --%3E%3Cline x1=\'180\' y1=\'200\' x2=\'180\' y2=\'250\' stroke=\'%23ffffff\' stroke-width=\'3\'/%3E%3Cline x1=\'220\' y1=\'200\' x2=\'220\' y2=\'250\' stroke=\'%23ffffff\' stroke-width=\'3\'/%3E%3C!-- Embouts des cordons --%3E%3Ccircle cx=\'180\' cy=\'250\' r=\'3\' fill=\'%23333\'/%3E%3Ccircle cx=\'220\' cy=\'250\' r=\'3\' fill=\'%23333\'/%3E%3C/svg%3E'); background-size: contain; background-repeat: no-repeat; background-position: center; width: 100%; height: 400px;"
    ></div>
    <img 
      id="logo" 
      src="" 
      alt="Logo" 
      class="logo" 
      style="display:none;"
    />
  </div>

  <div class="controls">
    <label>Choisir couleur :
      <input 
        type="color" 
        id="colorPicker" 
        value="#ff0000"
      />
    </label>
    
    <label>Ajouter logo :
      <input 
        type="file" 
        id="logoUploader" 
        accept="image/*"
      />
    </label>
  </div>

  <script>
    const hoodie = document.getElementById("hoodie");
    const logo = document.getElementById("logo");
    const colorPicker = document.getElementById("colorPicker");
    const logoUploader = document.getElementById("logoUploader");

    // Changer couleur
    colorPicker.addEventListener("input", (e) => {
      const hex = e.target.value.replace('#', '');
      const r = parseInt(hex.substr(0, 2), 16);
      const g = parseInt(hex.substr(2, 2), 16);
      const b = parseInt(hex.substr(4, 2), 16);
      
      // Calculer la teinte pour hue-rotate
      const max = Math.max(r, g, b);
      const min = Math.min(r, g, b);
      let hue = 0;
      
      if (max !== min) {
        const d = max - min;
        if (max === r) hue = ((g - b) / d) % 6;
        else if (max === g) hue = (b - r) / d + 2;
        else hue = (r - g) / d + 4;
      }
      
      const hueDegrees = Math.round(hue * 60);
      hoodie.style.filter = `hue-rotate(${hueDegrees}deg) saturate(1.2) brightness(1.1)`;
    });

    // Ajouter logo
    logoUploader.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (ev) => {
          logo.src = ev.target.result;
          logo.style.display = "block";
          logo.style.width = "80px";
          logo.style.height = "80px";
        };
        reader.readAsDataURL(file);
      }
    });

    // Initialiser avec la couleur rouge par d√©faut
    colorPicker.dispatchEvent(new Event('input'));
  </script>
</body>
</html>